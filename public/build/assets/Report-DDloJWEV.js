import{d as M,u as R,c as A,a,e as t,h as q,w as n,b as s,g as i,t as r,o as h,f as v,i as b,F as O,q as d,V as P}from"./app-CtfNrmtn.js";import{_ as T}from"./AppLayout.vue_vue_type_script_setup_true_lang-EItJCeZc.js";import{_ as u,a as _}from"./CardContent.vue_vue_type_script_setup_true_lang-DbCgYpT5.js";import{a as p,_ as f}from"./CardTitle.vue_vue_type_script_setup_true_lang-DlHfVS-H.js";import{_ as j}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BMNh7sd3.js";import{_ as E}from"./Input.vue_vue_type_script_setup_true_lang-BlOgnfBg.js";import{_ as D}from"./Label.vue_vue_type_script_setup_true_lang-C_kG8D9G.js";import{C as z,b as G,L as H,e as J,f as K,B as Q,c as U,p as W,a as X,g as I,d as Y}from"./index-DS61-e3s.js";import"./index-BPCe6HC_.js";import"./VisuallyHidden-BfTYpA9C.js";import"./useForwardExpose-CPKYoMYP.js";import"./useForwardPropsEmits-DU_LCEXL.js";import"./index-BDqSilVs.js";import"./createLucideIcon-DqD5oH_h.js";import"./truck-BbJIQY32.js";const Z={class:"flex h-full flex-1 flex-col gap-4 p-4 md:p-6"},tt={class:"grid gap-4 md:grid-cols-3"},et={class:"space-y-2"},at={class:"space-y-2"},nt={class:"flex items-end"},ot={class:"grid gap-4 md:grid-cols-2"},lt={style:{height:"300px"}},st={style:{height:"300px"}},ct={style:{height:"400px"}},rt={class:"grid gap-4 md:grid-cols-2"},it={class:"space-y-2"},dt={class:"text-sm text-muted-foreground"},mt={class:"text-2xl font-bold text-emerald-600"},ut={class:"space-y-2"},_t={class:"text-sm text-muted-foreground"},pt={class:"text-2xl font-bold text-rose-600"},St=M({__name:"Report",props:{monthlyIncome:{},monthlyExpense:{},startDate:{},endDate:{}},setup(m){z.register(G,H,J,K,Q,U,W,X);const{t:l}=R(),c=m,k=[{title:l("nav.accounting"),href:route("warehouse.accounting.index")},{title:l("accounting.report")}],g={responsive:!0,maintainAspectRatio:!0},$=d(()=>({labels:c.monthlyIncome.map(e=>e.month),datasets:[{label:l("accounting.income"),data:c.monthlyIncome.map(e=>e.total),borderColor:"#10b981",backgroundColor:"rgba(16, 185, 129, 0.1)",tension:.4}]})),B=d(()=>({labels:c.monthlyExpense.map(e=>e.month),datasets:[{label:l("accounting.expenses"),data:c.monthlyExpense.map(e=>e.total),borderColor:"#ef4444",backgroundColor:"rgba(239, 68, 68, 0.1)",tension:.4}]})),L=d(()=>{const e={};return c.monthlyIncome.forEach(o=>{e[o.month]=o.total}),e}),S=d(()=>{const e={};return c.monthlyExpense.forEach(o=>{e[o.month]=o.total}),e}),x=d(()=>{const e=new Set([...c.monthlyIncome.map(o=>o.month),...c.monthlyExpense.map(o=>o.month)]);return Array.from(e).sort()}),V=d(()=>({labels:x.value,datasets:[{label:l("accounting.income"),data:x.value.map(e=>L.value[e]||0),backgroundColor:"#10b981"},{label:l("accounting.expenses"),data:x.value.map(e=>S.value[e]||0),backgroundColor:"#ef4444"}]})),w=d(()=>c.monthlyIncome.reduce((e,o)=>e+(o.total||0),0).toLocaleString(void 0,{minimumFractionDigits:2})),F=d(()=>c.monthlyExpense.reduce((e,o)=>e+(o.total||0),0).toLocaleString(void 0,{minimumFractionDigits:2}));function C(e,o){P.get(route("warehouse.accounting.report"),{start_date:e==="start_date"?o:c.startDate,end_date:e==="end_date"?o:c.endDate})}function N(){}return(e,o)=>(h(),A(O,null,[a(t(q),{title:t(l)("accounting.report")},null,8,["title"]),a(T,{breadcrumbs:k},{default:n(()=>[s("div",Z,[a(t(u),null,{default:n(()=>[a(t(p),null,{default:n(()=>[a(t(f),null,{default:n(()=>[i(r(t(l)("common.dateRange")),1)]),_:1})]),_:1}),a(t(_),null,{default:n(()=>[s("div",tt,[s("div",et,[a(t(D),{for:"start_date"},{default:n(()=>[i(r(t(l)("common.startDate")),1)]),_:1}),a(t(E),{id:"start_date",type:"date",value:m.startDate,onChange:o[0]||(o[0]=y=>C("start_date",y.target.value))},null,8,["value"])]),s("div",at,[a(t(D),{for:"end_date"},{default:n(()=>[i(r(t(l)("common.endDate")),1)]),_:1}),a(t(E),{id:"end_date",type:"date",value:m.endDate,onChange:o[1]||(o[1]=y=>C("end_date",y.target.value))},null,8,["value"])]),s("div",nt,[a(t(j),{onClick:N},{default:n(()=>[i(r(t(l)("common.apply")),1)]),_:1})])])]),_:1})]),_:1}),s("div",ot,[m.monthlyIncome.length>0?(h(),v(t(u),{key:0},{default:n(()=>[a(t(p),null,{default:n(()=>[a(t(f),null,{default:n(()=>[i(r(t(l)("accounting.monthlyIncome")),1)]),_:1})]),_:1}),a(t(_),null,{default:n(()=>[s("div",lt,[a(t(I),{data:$.value,options:g},null,8,["data"])])]),_:1})]),_:1})):b("",!0),m.monthlyExpense.length>0?(h(),v(t(u),{key:1},{default:n(()=>[a(t(p),null,{default:n(()=>[a(t(f),null,{default:n(()=>[i(r(t(l)("accounting.monthlyExpense")),1)]),_:1})]),_:1}),a(t(_),null,{default:n(()=>[s("div",st,[a(t(I),{data:B.value,options:g},null,8,["data"])])]),_:1})]),_:1})):b("",!0)]),m.monthlyIncome.length>0&&m.monthlyExpense.length>0?(h(),v(t(u),{key:0},{default:n(()=>[a(t(p),null,{default:n(()=>[a(t(f),null,{default:n(()=>[i(r(t(l)("accounting.incomeVsExpense")),1)]),_:1})]),_:1}),a(t(_),null,{default:n(()=>[s("div",ct,[a(t(Y),{data:V.value,options:g},null,8,["data"])])]),_:1})]),_:1})):b("",!0),a(t(u),null,{default:n(()=>[a(t(p),null,{default:n(()=>[a(t(f),null,{default:n(()=>[i(r(t(l)("common.summary")),1)]),_:1})]),_:1}),a(t(_),null,{default:n(()=>[s("div",rt,[s("div",it,[s("p",dt,r(t(l)("accounting.totalIncome")),1),s("p",mt,r(w.value),1)]),s("div",ut,[s("p",_t,r(t(l)("accounting.totalExpense")),1),s("p",pt,r(F.value),1)])])]),_:1})]),_:1})])]),_:1})],64))}});export{St as default};
