import{d as w,u as g,c as _,a as e,e as t,h as C,w as s,b as o,g as l,t as a,o as i,F as h,p as B,f as F,I as N,q as f}from"./app-CtfNrmtn.js";import{C as q,_ as L}from"./AppLayout.vue_vue_type_script_setup_true_lang-EItJCeZc.js";import{_ as P}from"./AppPageContent.vue_vue_type_script_setup_true_lang-BdmZ_T2S.js";import{_ as V,a as j,b as k,c as u,d as D,e as m}from"./TableRow.vue_vue_type_script_setup_true_lang-BNGutH5E.js";import{_ as I}from"./index-DULp_EJb.js";import{_ as M,a as z}from"./CardContent.vue_vue_type_script_setup_true_lang-DbCgYpT5.js";import{a as A,_ as E}from"./CardTitle.vue_vue_type_script_setup_true_lang-DlHfVS-H.js";import{C as T}from"./circle-alert-Ifi_Td1K.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BMNh7sd3.js";import"./index-BPCe6HC_.js";import"./VisuallyHidden-BfTYpA9C.js";import"./useForwardExpose-CPKYoMYP.js";import"./useForwardPropsEmits-DU_LCEXL.js";import"./index-BDqSilVs.js";import"./createLucideIcon-DqD5oH_h.js";import"./truck-BbJIQY32.js";const W={class:"p-4 md:p-6 pb-0"},G={class:"text-xl font-semibold"},H={class:"p-4 md:p-6 pt-4"},J={class:"mb-6"},K={class:"text-3xl font-bold text-destructive"},O={key:0,class:"rounded-lg border overflow-hidden"},Q={class:"flex items-center gap-2 justify-end"},R={class:"w-24 h-2 bg-gray-200 rounded-full overflow-hidden"},U={class:"text-xs text-muted-foreground w-10"},X={key:1,class:"text-center text-muted-foreground py-8"},ft=w({__name:"LowStock",props:{products:{}},setup(v){const p=v,{t:d}=g(),b=f(()=>g().locale.value==="tr"?"name_tr":"name_en"),y=[{title:d("nav.reports"),href:q.url()},{title:d("reports.lowStock")}],$=f(()=>p.products.map(n=>({...n,deficiency:Math.max(0,n.min_stock-n.total_stock),percentage:(n.total_stock/n.min_stock*100).toFixed(1)}))),x=f(()=>[...$.value].sort((n,r)=>r.deficiency-n.deficiency));return(n,r)=>(i(),_(h,null,[e(t(C),{title:t(d)("reports.lowStock")},null,8,["title"]),e(L,{breadcrumbs:y},{default:s(()=>[e(P,null,{header:s(()=>[o("div",W,[o("h1",G,a(t(d)("reports.lowStock")),1),r[0]||(r[0]=o("p",{class:"text-sm text-muted-foreground"},"Products below minimum stock threshold",-1))])]),default:s(()=>[o("div",H,[o("div",J,[e(t(M),null,{default:s(()=>[e(t(A),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:s(()=>[e(t(E),{class:"text-sm font-medium"},{default:s(()=>[l(a(t(d)("stock.lowStock")),1)]),_:1}),e(t(T),{class:"h-4 w-4 text-destructive"})]),_:1}),e(t(z),null,{default:s(()=>[o("div",K,a(p.products?.length||0),1),r[1]||(r[1]=o("p",{class:"text-xs text-muted-foreground mt-1"}," Products requiring restock ",-1))]),_:1})]),_:1})]),x.value?.length?(i(),_("div",O,[e(t(V),{class:"bg-transparent"},{default:s(()=>[e(t(j),null,{default:s(()=>[e(t(k),{class:"border-transparent hover:bg-transparent"},{default:s(()=>[e(t(u),{class:"text-muted-foreground"},{default:s(()=>[l(a(t(d)("stock.product")),1)]),_:1}),e(t(u),{class:"text-muted-foreground text-right"},{default:s(()=>[l(a(t(d)("common.quantity")),1)]),_:1}),e(t(u),{class:"text-muted-foreground text-right"},{default:s(()=>[l(a(t(d)("products.minStock")),1)]),_:1}),e(t(u),{class:"text-muted-foreground text-right"},{default:s(()=>[...r[2]||(r[2]=[l("Needed",-1)])]),_:1}),e(t(u),{class:"text-muted-foreground text-right"},{default:s(()=>[...r[3]||(r[3]=[l("Stock Level",-1)])]),_:1})]),_:1})]),_:1}),e(t(D),null,{default:s(()=>[(i(!0),_(h,null,B(x.value,(c,S)=>(i(),F(t(k),{key:S,class:"border-transparent hover:bg-muted/30"},{default:s(()=>[e(t(m),{class:"font-medium"},{default:s(()=>[l(a(c.product[b.value]),1)]),_:2},1024),e(t(m),{class:"text-right"},{default:s(()=>[e(t(I),{variant:"destructive"},{default:s(()=>[l(a(c.total_stock),1)]),_:2},1024)]),_:2},1024),e(t(m),{class:"text-right"},{default:s(()=>[l(a(c.min_stock),1)]),_:2},1024),e(t(m),{class:"text-right font-medium text-destructive"},{default:s(()=>[l(a(c.deficiency),1)]),_:2},1024),e(t(m),{class:"text-right"},{default:s(()=>[o("div",Q,[o("div",R,[o("div",{class:"h-full bg-red-500",style:N({width:Math.min(100,parseFloat(c.percentage)*100/100)+"%"})},null,4)]),o("span",U,a(c.percentage)+"%",1)])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})])):(i(),_("p",X,a(t(d)("stock.inStock")),1))])]),_:1})]),_:1})],64))}});export{ft as default};
