import{d as S,u as $,c as h,a as e,e as t,h as D,w as a,b as l,g as d,t as o,o as i,f as k,i as w,F as M,p as P,l as T,q as C}from"./app-CtfNrmtn.js";import{h as V,_ as A}from"./AppLayout.vue_vue_type_script_setup_true_lang-EItJCeZc.js";import{d as L}from"./index-BDqSilVs.js";import{_ as m,a as f}from"./CardContent.vue_vue_type_script_setup_true_lang-DbCgYpT5.js";import{_ as b}from"./CardDescription.vue_vue_type_script_setup_true_lang-tVX4N8Eu.js";import{a as _,_ as p}from"./CardTitle.vue_vue_type_script_setup_true_lang-DlHfVS-H.js";import{_ as N}from"./index-DULp_EJb.js";import{_ as O}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BMNh7sd3.js";import{C as E,A as W,p as F,a as q,b as R,L as I,B as U,c as z,P as G,d as H}from"./index-DS61-e3s.js";import{T as J}from"./trending-down-B1lISPxG.js";import{P as K,A as Q}from"./truck-BbJIQY32.js";import{D as X}from"./dollar-sign-DKPSYjqT.js";const Y={class:"flex flex-col gap-6 p-4 md:p-6"},Z={class:"grid gap-4 md:grid-cols-3"},tt={class:"text-2xl font-bold"},et={class:"text-xs text-muted-foreground"},at={class:"text-2xl font-bold"},st={class:"text-2xl font-bold"},ot={class:"grid gap-4 md:grid-cols-2"},lt={style:{height:"300px"}},nt={style:{height:"300px"}},dt={key:0,class:"space-y-4"},rt={class:"flex items-center gap-3"},ut={class:"font-medium"},it={class:"text-sm text-muted-foreground"},ct={key:1,class:"text-muted-foreground"},Ct=S({__name:"Dashboard",props:{lowStockCount:{},totalProducts:{},totalValue:{},recentMovements:{},movementsByType:{}},setup(c){E.register(W,F,q,R,I,U,z);const v=c,{t:s,locale:B}=$(),j=[{title:s("nav.dashboard"),href:L().url}],g=C(()=>{const r=v.movementsByType||{};return{labels:Object.keys(r).map(n=>({in:s("nav.input"),out:s("nav.output"),transfer:s("nav.transfer"),adjustment:s("nav.adjustment")})[n]||n),datasets:[{label:s("stockMovements.title"),data:Object.values(r),backgroundColor:["#10b981","#ef4444","#3b82f6","#f59e0b"],borderColor:["#059669","#dc2626","#1d4ed8","#d97706"],borderWidth:2}]}}),x=C(()=>{const r={};return v.recentMovements?.forEach(u=>{const n=u.warehouse?.[B.value==="tr"?"name_tr":"name_en"]||"Unknown";r[n]=(r[n]||0)+1}),{labels:Object.keys(r),datasets:[{label:s("stockMovements.title"),data:Object.values(r),backgroundColor:"#3b82f6",borderColor:"#1d4ed8",borderWidth:1}]}}),y={responsive:!0,maintainAspectRatio:!0};return(r,u)=>(i(),h(M,null,[e(t(D),{title:t(s)("dashboard.title")},null,8,["title"]),e(A,{breadcrumbs:j},{default:a(()=>[l("div",Y,[l("div",Z,[e(t(m),null,{default:a(()=>[e(t(_),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[e(t(p),{class:"text-sm font-medium"},{default:a(()=>[d(o(t(s)("dashboard.lowStock")),1)]),_:1}),e(t(J),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),e(t(f),null,{default:a(()=>[l("div",tt,o(c.lowStockCount),1),l("p",et,o(t(s)("stock.lowStock")),1)]),_:1})]),_:1}),e(t(m),null,{default:a(()=>[e(t(_),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[e(t(p),{class:"text-sm font-medium"},{default:a(()=>[d(o(t(s)("dashboard.totalProducts")),1)]),_:1}),e(t(K),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),e(t(f),null,{default:a(()=>[l("div",at,o(c.totalProducts),1)]),_:1})]),_:1}),e(t(m),null,{default:a(()=>[e(t(_),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:a(()=>[e(t(p),{class:"text-sm font-medium"},{default:a(()=>[d(o(t(s)("dashboard.totalValue")),1)]),_:1}),e(t(X),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),e(t(f),null,{default:a(()=>[l("div",st,o(Number(c.totalValue).toLocaleString(void 0,{minimumFractionDigits:2})),1)]),_:1})]),_:1})]),l("div",ot,[g.value.datasets[0].data.length>0?(i(),k(t(m),{key:0},{default:a(()=>[e(t(_),null,{default:a(()=>[e(t(p),null,{default:a(()=>[d(o(t(s)("dashboard.movementsByType")),1)]),_:1}),e(t(b),null,{default:a(()=>[...u[0]||(u[0]=[d("Stock movement distribution",-1)])]),_:1})]),_:1}),e(t(f),null,{default:a(()=>[l("div",lt,[e(t(G),{data:g.value,options:y},null,8,["data"])])]),_:1})]),_:1})):w("",!0),x.value.datasets[0].data.length>0?(i(),k(t(m),{key:1},{default:a(()=>[e(t(_),null,{default:a(()=>[e(t(p),null,{default:a(()=>[d(o(t(s)("dashboard.movementsByWarehouse")),1)]),_:1}),e(t(b),null,{default:a(()=>[...u[1]||(u[1]=[d("Activity per warehouse",-1)])]),_:1})]),_:1}),e(t(f),null,{default:a(()=>[l("div",nt,[e(t(H),{data:x.value,options:y},null,8,["data"])])]),_:1})]),_:1})):w("",!0)]),e(t(m),null,{default:a(()=>[e(t(_),null,{default:a(()=>[e(t(p),null,{default:a(()=>[d(o(t(s)("dashboard.recentMovements")),1)]),_:1}),e(t(b),null,{default:a(()=>[d(o(t(s)("stockMovements.title")),1)]),_:1})]),_:1}),e(t(f),null,{default:a(()=>[c.recentMovements?.length?(i(),h("div",dt,[(i(!0),h(M,null,P(c.recentMovements,n=>(i(),h("div",{key:n.id,class:"flex items-center justify-between border-b pb-3 last:border-0 last:pb-0"},[l("div",rt,[e(t(Q),{class:"h-4 w-4 text-muted-foreground"}),l("div",null,[l("p",ut,o(n.product?.[r.$i18n.locale==="tr"?"name_tr":"name_en"]||"-"),1),l("p",it,o(n.warehouse?.[r.$i18n.locale==="tr"?"name_tr":"name_en"]||"-")+" · "+o(n.type)+" · "+o(n.quantity),1)])]),e(t(N),{variant:"secondary"},{default:a(()=>[d(o(n.movement_date),1)]),_:2},1024)]))),128))])):(i(),h("p",ct,o(t(s)("dashboard.noMovements")),1)),e(t(T),{href:t(V).url()},{default:a(()=>[e(t(O),{variant:"outline",class:"mt-4"},{default:a(()=>[d(o(t(s)("stockMovements.title")),1)]),_:1})]),_:1},8,["href"])]),_:1})]),_:1})])]),_:1})],64))}});export{Ct as _};
